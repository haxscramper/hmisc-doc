<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--  This file is generated by Nim. -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Favicon -->
<link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>
<link rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH4QQQEwksSS9ZWwAAAk1JREFUWMPtll2ITVEUx39nn/O7Y5qR8f05wtCUUr6ZIS++8pEnkZInPImneaCQ5METNdOkeFBKUhMPRIkHKfEuUZSUlGlKPN2TrgfncpvmnntnmlEyq1Z7t89/rf9a6+y99oZxGZf/XeIq61EdtgKXgdXA0xrYAvBjOIF1AI9zvjcC74BSpndrJPkBWDScTF8Aa4E3wDlgHbASaANmVqlcCnwHvgDvgVfAJ+AikAAvgfVZwLnSVZHZaOuKoQi3ZOMi4NkYkpe1p4J7A8BpYAD49hfIy/oqG0+hLomiKP2L5L+1ubn5115S+3OAn4EnwBlgMzCjyt6ZAnQCJ4A7wOs88iRJHvw50HoujuPBoCKwHWiosy8MdfZnAdcHk8dxXFJ3VQbQlCTJvRBCGdRbD4M6uc5glpY3eAihpN5S5w12diSEcCCEcKUO4ljdr15T76ur1FDDLIQQ3qv71EdDOe3Kxj3leRXyk+pxdWnFWod6Wt2bY3de3aSuUHcPBVimHs7mK9WrmeOF6lR1o9qnzskh2ar2qm1qizpfXaPeVGdlmGN5pb09qMxz1Xb1kLqgzn1RyH7JUXW52lr5e/Kqi9qpto7V1atuUzfnARrV7jEib1T76gG2qxdGmXyiekkt1GswPTtek0aBfJp6YySGBfWg2tPQ0FAYgf1stUfdmdcjarbYJEniKIq6gY/Aw+zWHAC+p2labGpqiorFYgGYCEzN7oQdQClN07O1/EfDyGgC0ALMBdYAi4FyK+4H3gLPsxfR1zRNi+NP7nH5J+QntnXe5B5mpfQAAAAASUVORK5CYII=">

<!-- Google fonts -->
<link href='https://fonts.googleapis.com/css?family=Lato:400,600,900' rel='stylesheet' type='text/css'/>
<link href='https://fonts.googleapis.com/css?family=Source+Code+Pro:400,500,600' rel='stylesheet' type='text/css'/>

<!-- CSS -->
<title>readme</title>
<link rel="stylesheet" type="text/css" href="nimdoc.out.css">

<script type="text/javascript" src="dochack.js"></script>

<script type="text/javascript">
function main() {
  var pragmaDots = document.getElementsByClassName("pragmadots");
  for (var i = 0; i < pragmaDots.length; i++) {
    pragmaDots[i].onclick = function(event) {
      // Hide tease
      event.target.parentNode.style.display = "none";
      // Show actual
      event.target.parentNode.nextElementSibling.style.display = "inline";
    }
  }

  const toggleSwitch = document.querySelector('.theme-switch input[type="checkbox"]');
  function switchTheme(e) {
      if (e.target.checked) {
          document.documentElement.setAttribute('data-theme', 'dark');
          localStorage.setItem('theme', 'dark');
      } else {
          document.documentElement.setAttribute('data-theme', 'light');
          localStorage.setItem('theme', 'light');
      }
  }

  toggleSwitch.addEventListener('change', switchTheme, false);


  if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
    document.documentElement.setAttribute('data-theme', "dark");
    toggleSwitch.checked = true;
  } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches) {
    document.documentElement.setAttribute('data-theme', "light");
    toggleSwitch.checked = false;
  } else {
    const currentTheme = localStorage.getItem('theme') ? localStorage.getItem('theme') : null;
    if (currentTheme) {
      document.documentElement.setAttribute('data-theme', currentTheme);

      if (currentTheme === 'dark') {
        toggleSwitch.checked = true;
      }
    }
  }
}
</script>

</head>
<body onload="main()">
<div class="document" id="documentId">
  <div class="container">
    <h1 class="title">readme</h1>
    <div class="row">
  <div class="three columns">
  <div class="theme-switch-wrapper">
    <label class="theme-switch" for="checkbox">
      <input type="checkbox" id="checkbox" />
      <div class="slider round"></div>
    </label>
   &nbsp;&nbsp;&nbsp; <em>Dark Mode</em>
  </div>
  <div id="global-links">
    <ul class="simple-boot">
      <li>
        <a href="manual.html">Manual</a>
      </li>
      <li>
        <a href="lib.html">Standard library</a>
      </li>
      <li>
        <a href="theindex.html">Index</a>
      </li>
    </ul>
  </div>
  <div id="searchInputDiv">
    Search: <input type="text" id="searchInput"
      onkeyup="search()" />
  </div>
  <ul class="simple simple-toc" id="toc-list">
<li><a class="reference" id="Z1-toplevel_toc" href="#Z1-toplevel">1 Toplevel</a></li>
<ul class="simple"><li><a class="reference" id="Z1-toplevel-Z1dot1-hmiscslashhexceptions-documentationhttpscolonslashslashhaxscramperdotgithubdotioslashhmiscminusdocslashsrcslashhmiscslashhexceptionsdothtml_toc" href="#Z1-toplevel-Z1dot1-hmiscslashhexceptions-documentationhttpscolonslashslashhaxscramperdotgithubdotioslashhmiscminusdocslashsrcslashhmiscslashhexceptionsdothtml">1.1 <tt class="docutils literal"><span class="pre">hmisc/hexceptions</span></tt> <a class="reference external" href="https://haxscramper.github.io/hmisc-doc/src/hmisc/hexceptions.html">documentation</a></a></li>
</ul><li><a class="reference" id="Z2-macros_toc" href="#Z2-macros">2 Macros</a></li>
<ul class="simple"><li><a class="reference" id="Z2-macros-Z2dot1-hmiscslashmacrosslashobj-field-macros-documentationhttpscolonslashslashhaxscramperdotgithubdotioslashhmiscminusdocslashsrcslashhmiscslashmacrosslashobj-field-macrosdothtml_toc" href="#Z2-macros-Z2dot1-hmiscslashmacrosslashobj-field-macros-documentationhttpscolonslashslashhaxscramperdotgithubdotioslashhmiscminusdocslashsrcslashhmiscslashmacrosslashobj-field-macrosdothtml">2.1 <tt class="docutils literal"><span class="pre">hmisc/macros/obj_field_macros</span></tt> <a class="reference external" href="https://haxscramper.github.io/hmisc-doc/src/hmisc/macros/obj_field_macros.html">documentation</a></a></li>
<li><a class="reference" id="Z2-macros-Z2dot2-hmiscslashmacrosslashiflet_toc" href="#Z2-macros-Z2dot2-hmiscslashmacrosslashiflet">2.2 <tt class="docutils literal"><span class="pre">hmisc/macros/iflet</span></tt></a></li>
</ul><li><a class="reference" id="Z3-algorithms_toc" href="#Z3-algorithms">3 Algorithms</a></li>
<ul class="simple"><li><a class="reference" id="Z3-algorithms-Z3dot1-hmiscslashalgoslashhalgorithm-documentationhttpscolonslashslashhaxscramperdotgithubdotioslashhmiscminusdocslashsrcslashhmiscslashalgoslashhalgorithmdothtml_toc" href="#Z3-algorithms-Z3dot1-hmiscslashalgoslashhalgorithm-documentationhttpscolonslashslashhaxscramperdotgithubdotioslashhmiscminusdocslashsrcslashhmiscslashalgoslashhalgorithmdothtml">3.1 <tt class="docutils literal"><span class="pre">hmisc/algo/halgorithm</span></tt> <a class="reference external" href="https://haxscramper.github.io/hmisc-doc/src/hmisc/algo/halgorithm.html">documentation</a></a></li>
<li><a class="reference" id="Z3-algorithms-Z3dot2-hmiscslashalgoslashhseqdistance_toc" href="#Z3-algorithms-Z3dot2-hmiscslashalgoslashhseqdistance">3.2 <tt class="docutils literal"><span class="pre">hmisc/algo/hseqdistance</span></tt></a></li>
<li><a class="reference" id="Z3-algorithms-Z3dot3-hmiscslashalgoslashhseq-mapping_toc" href="#Z3-algorithms-Z3dot3-hmiscslashalgoslashhseq-mapping">3.3 <tt class="docutils literal"><span class="pre">hmisc/algo/hseq_mapping</span></tt></a></li>
<li><a class="reference" id="Z3-algorithms-Z3dot4-hmiscslashalgoslashhtree-mapping_toc" href="#Z3-algorithms-Z3dot4-hmiscslashalgoslashhtree-mapping">3.4 <tt class="docutils literal"><span class="pre">hmisc/algo/htree_mapping</span></tt></a></li>
</ul><li><a class="reference" id="Z4-types_toc" href="#Z4-types">4 Types</a></li>
<ul class="simple"><li><a class="reference" id="Z4-types-Z4dot1-hmiscslashtypesslashhnim-ast_toc" href="#Z4-types-Z4dot1-hmiscslashtypesslashhnim-ast">4.1 <tt class="docutils literal"><span class="pre">hmisc/types/hnim_ast</span></tt></a></li>
<li><a class="reference" id="Z4-types-Z4dot2-hmiscslashtypesslashhprimitives_toc" href="#Z4-types-Z4dot2-hmiscslashtypesslashhprimitives">4.2 <tt class="docutils literal"><span class="pre">hmisc/types/hprimitives</span></tt></a></li>
<li><a class="reference" id="Z4-types-Z4dot3-hmiscslashtypesslashseq2d_toc" href="#Z4-types-Z4dot3-hmiscslashtypesslashseq2d">4.3 <tt class="docutils literal"><span class="pre">hmisc/types/seq2d</span></tt></a></li>
<ul class="simple"><li><a class="reference" id="Z4dot3-hmiscslashtypesslashseq2d-Z4dot3dot1-seq2d_toc" href="#Z4dot3-hmiscslashtypesslashseq2d-Z4dot3dot1-seq2d">4.3.1 <tt class="docutils literal"><span class="pre">Seq2D</span></tt></a></li>
<li><a class="reference" id="Z4dot3-hmiscslashtypesslashseq2d-Z4dot3dot2-multicellgrid_toc" href="#Z4dot3-hmiscslashtypesslashseq2d-Z4dot3dot2-multicellgrid">4.3.2 <tt class="docutils literal"><span class="pre">MulticellGrid</span></tt></a></li>
</ul><li><a class="reference" id="Z4-types-Z4dot4-hmiscslashtypesslashhtrie_toc" href="#Z4-types-Z4dot4-hmiscslashtypesslashhtrie">4.4 <tt class="docutils literal"><span class="pre">hmisc/types/htrie</span></tt></a></li>
<li><a class="reference" id="Z4-types-Z4dot5-hmiscslashtypesslashhvariant_toc" href="#Z4-types-Z4dot5-hmiscslashtypesslashhvariant">4.5 <tt class="docutils literal"><span class="pre">hmisc/types/hvariant</span></tt></a></li>
<li><a class="reference" id="Z4-types-Z4dot6-hmiscslashtypesslashcolorstring_toc" href="#Z4-types-Z4dot6-hmiscslashtypesslashcolorstring">4.6 <tt class="docutils literal"><span class="pre">hmisc/types/colorstring</span></tt></a></li>
</ul><li><a class="reference" id="Z5-contribution-amp-development_toc" href="#Z5-contribution-amp-development">5 Contribution &amp; development</a></li>

</ul>

  </div>
  <div class="nine columns" id="content">
  <div id="tocRoot"></div>
  
  <p class="module-desc"><p>Collection of miscellaneous helper algorithms and types.</p>

<h1><a class="toc-backref" id="Z1-toplevel" href="#Z1-toplevel">1 Toplevel</a></h1>
<h2><a class="toc-backref" id="Z1-toplevel-Z1dot1-hmiscslashhexceptions-documentationhttpscolonslashslashhaxscramperdotgithubdotioslashhmiscminusdocslashsrcslashhmiscslashhexceptionsdothtml" href="#Z1-toplevel-Z1dot1-hmiscslashhexceptions-documentationhttpscolonslashslashhaxscramperdotgithubdotioslashhmiscminusdocslashsrcslashhmiscslashhexceptionsdothtml">1.1 <tt class="docutils literal"><span class="pre">hmisc/hexceptions</span></tt> <a class="reference external" href="https://haxscramper.github.io/hmisc-doc/src/hmisc/hexceptions.html">documentation</a></a></h2><p>One of features of this library - easily generate annotations for source code. Show exact line in the source code and provide custom annotations.</p>
<pre class="listing"><span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">define</span><span class="Punctuation">(</span><span class="Identifier">plainStdout</span><span class="Punctuation">)</span><span class="Operator">.</span><span class="Punctuation">}</span> <span class="Comment"># Output is colored by default, disable for</span>
                    <span class="Comment"># readme example</span>
<span class="Keyword">import</span> <span class="Identifier">hmisc</span><span class="Operator">/</span><span class="Identifier">hexceptions</span>

<span class="Keyword">macro</span> <span class="Identifier">test</span><span class="Punctuation">(</span><span class="Identifier">a</span><span class="Punctuation">:</span> <span class="Identifier">untyped</span><span class="Punctuation">)</span><span class="Punctuation">:</span> <span class="Identifier">untyped</span> <span class="Operator">=</span>
  <span class="Keyword">raise</span> <span class="Identifier">toCodeError</span><span class="Punctuation">(</span><span class="Punctuation">{</span>
    <span class="Identifier">a</span><span class="Punctuation">[</span><span class="DecNumber">2</span><span class="Punctuation">]</span> <span class="Punctuation">:</span> <span class="StringLit">&quot;Third element in array&quot;</span><span class="Punctuation">,</span>
    <span class="Identifier">a</span><span class="Punctuation">[</span><span class="DecNumber">0</span><span class="Punctuation">]</span> <span class="Punctuation">:</span> <span class="StringLit">&quot;Array starts here</span><span class="EscapeSequence">\n</span><span class="StringLit">Multiline annotations&quot;</span><span class="Punctuation">,</span>
    <span class="Identifier">a</span><span class="Punctuation">[</span><span class="DecNumber">5</span><span class="Punctuation">]</span> <span class="Punctuation">:</span> <span class="StringLit">&quot;Annotation for part on the different line&quot;</span>
  <span class="Punctuation">}</span><span class="Punctuation">,</span> <span class="StringLit">&quot;Annotation for array error&quot;</span><span class="Punctuation">)</span>

<span class="Identifier">test</span><span class="Punctuation">(</span><span class="Punctuation">[</span><span class="DecNumber">1</span><span class="Punctuation">,</span><span class="DecNumber">2</span><span class="Punctuation">,</span><span class="DecNumber">3</span><span class="Punctuation">,</span><span class="DecNumber">4</span><span class="Punctuation">,</span>
      <span class="DecNumber">5</span><span class="Punctuation">,</span><span class="DecNumber">6</span><span class="Punctuation">]</span><span class="Punctuation">)</span></pre>
<pre class="listing">
<span style="color:red">This is a paragraph.</span>
<span style="color:blue">This is another paragraph.</span>
</pre>
<h1><a class="toc-backref" id="Z2-macros" href="#Z2-macros">2 Macros</a></h1>
<h2><a class="toc-backref" id="Z2-macros-Z2dot1-hmiscslashmacrosslashobj-field-macros-documentationhttpscolonslashslashhaxscramperdotgithubdotioslashhmiscminusdocslashsrcslashhmiscslashmacrosslashobj-field-macrosdothtml" href="#Z2-macros-Z2dot1-hmiscslashmacrosslashobj-field-macros-documentationhttpscolonslashslashhaxscramperdotgithubdotioslashhmiscminusdocslashsrcslashhmiscslashmacrosslashobj-field-macrosdothtml">2.1 <tt class="docutils literal"><span class="pre">hmisc/macros/obj_field_macros</span></tt> <a class="reference external" href="https://haxscramper.github.io/hmisc-doc/src/hmisc/macros/obj_field_macros.html">documentation</a></a></h2><ul class="simple"><li><tt class="docutils literal"><span class="pre">parallelFieldPairs</span></tt> - iterate case object fields in parallel</li>
<li><tt class="docutils literal"><span class="pre">getFields</span></tt> - construct sequence of <a class="reference external" href="https://haxscramper.github.io/hmisc-doc/src/hmisc/types/hnim_ast.html#Field">Field</a> types from node.</li>
</ul>

<h2><a class="toc-backref" id="Z2-macros-Z2dot2-hmiscslashmacrosslashiflet" href="#Z2-macros-Z2dot2-hmiscslashmacrosslashiflet">2.2 <tt class="docutils literal"><span class="pre">hmisc/macros/iflet</span></tt></a></h2><p>Rust-like iflet. Get value from <tt class="docutils literal"><span class="pre">Option[T]</span></tt> only if it contains something, otherwise execute <tt class="docutils literal"><span class="pre">else</span></tt>.</p>
<pre class="listing"><span class="Keyword">import</span> <span class="Identifier">options</span>
<span class="Keyword">import</span> <span class="Identifier">hmisc</span><span class="Operator">/</span><span class="Identifier">macros</span><span class="Operator">/</span><span class="Identifier">iflet</span>

<span class="Identifier">iflet</span> <span class="Punctuation">(</span><span class="Identifier">val</span> <span class="Operator">=</span> <span class="Identifier">some</span><span class="Punctuation">(</span><span class="DecNumber">12</span><span class="Punctuation">)</span><span class="Punctuation">)</span><span class="Punctuation">:</span>
  <span class="Identifier">echo</span> <span class="Identifier">typeof</span> <span class="Identifier">val</span>

<span class="Identifier">iflet</span> <span class="Punctuation">(</span><span class="Identifier">val</span> <span class="Operator">=</span> <span class="Identifier">none</span><span class="Punctuation">(</span><span class="Identifier">int</span><span class="Punctuation">)</span><span class="Punctuation">)</span><span class="Punctuation">:</span>
  <span class="Identifier">echo</span> <span class="StringLit">&quot;???&quot;</span>
<span class="Keyword">else</span><span class="Punctuation">:</span>
  <span class="Identifier">echo</span> <span class="StringLit">&quot;no value&quot;</span></pre>
<pre class="listing">
<span style="color:red">This is a paragraph.</span>
<span style="color:blue">This is another paragraph.</span>
</pre>
<h1><a class="toc-backref" id="Z3-algorithms" href="#Z3-algorithms">3 Algorithms</a></h1><p>:header-args:nim:+ :import hmisc/algo/halgorithm</p>

<h2><a class="toc-backref" id="Z3-algorithms-Z3dot1-hmiscslashalgoslashhalgorithm-documentationhttpscolonslashslashhaxscramperdotgithubdotioslashhmiscminusdocslashsrcslashhmiscslashalgoslashhalgorithmdothtml" href="#Z3-algorithms-Z3dot1-hmiscslashalgoslashhalgorithm-documentationhttpscolonslashslashhaxscramperdotgithubdotioslashhmiscminusdocslashsrcslashhmiscslashalgoslashhalgorithmdothtml">3.1 <tt class="docutils literal"><span class="pre">hmisc/algo/halgorithm</span></tt> <a class="reference external" href="https://haxscramper.github.io/hmisc-doc/src/hmisc/algo/halgorithm.html">documentation</a></a></h2><ul class="simple"><li>predicates<ul class="simple"><li><tt class="docutils literal"><span class="pre">allOfIt</span></tt></li>
<li><tt class="docutils literal"><span class="pre">anyOfIt</span></tt></li>
<li><tt class="docutils literal"><span class="pre">noneOfIt</span></tt></li>
<li><tt class="docutils literal"><span class="pre">==</span></tt> for Option-Val comparison</li>
</ul>
</li>
<li>working with sequences<ul class="simple"><li><tt class="docutils literal"><span class="pre">maxIt</span></tt></li>
<li><tt class="docutils literal"><span class="pre">disjointIter</span></tt></li>
<li><tt class="docutils literal"><span class="pre">last</span></tt></li>
</ul>
</li>
<li>working with strings<ul class="simple"><li><tt class="docutils literal"><span class="pre">joinw</span></tt>, <tt class="docutils literal"><span class="pre">joinq</span></tt>, <tt class="docutils literal"><span class="pre">joinl</span></tt>, <tt class="docutils literal"><span class="pre">joinkv</span></tt> - join on whitespaces, whitespace + quote each string, newlines or key-value pairs.</li>
<li><tt class="docutils literal"><span class="pre">wrap</span></tt> - wrap strings in delimiters. Has convinience overload for <tt class="docutils literal"><span class="pre">.wrap(&quot;()&quot;)</span></tt> that automatically determines starting/ending wrapper strings.</li>
<li>Multiple overloads for <tt class="docutils literal"><span class="pre">join</span></tt> and <tt class="docutils literal"><span class="pre">startsWith</span></tt></li>
<li><tt class="docutils literal"><span class="pre">enclosedIn</span></tt> - check if string is wrapped in delimiters</li>
<li><tt class="docutils literal"><span class="pre">dedent</span></tt> - decease indentation for multiline string</li>
<li><tt class="docutils literal"><span class="pre">camelSplit</span></tt> - split string as camel case identifier</li>
<li><tt class="docutils literal"><span class="pre">abbrevCamel</span></tt> - <em>camelCase</em> abbreviation search.</li>
</ul>
</li>
<li>other<ul class="simple"><li><tt class="docutils literal"><span class="pre">ifSomeIt</span></tt> - same as <tt class="docutils literal"><span class="pre">opt.isSome() and (let it = opt.get(); predicate)</span></tt></li>
<li><tt class="docutils literal"><span class="pre">testEq</span></tt> - compare two objects. If they are different print first mismatching line in their string representation.</li>
<li><tt class="docutils literal"><span class="pre">assertEq</span></tt> - compare objects using <tt class="docutils literal"><span class="pre">testEq</span></tt>, raise on failed comparison.</li>
</ul>
</li>
</ul>
<pre class="listing"><span class="Keyword">import</span> <span class="Identifier">hmisc</span><span class="Operator">/</span><span class="Identifier">algo</span><span class="Operator">/</span><span class="Identifier">halgorithm</span>

<span class="Keyword">block</span><span class="Punctuation">:</span>
  <span class="Identifier">echo</span> <span class="StringLit">&quot;-- withIt --&quot;</span>
  <span class="Keyword">let</span> <span class="Identifier">immutable</span> <span class="Operator">=</span> <span class="Punctuation">(</span><span class="Identifier">a</span><span class="Punctuation">:</span> <span class="DecNumber">12</span><span class="Punctuation">,</span> <span class="Identifier">b</span><span class="Punctuation">:</span> <span class="DecNumber">12</span><span class="Punctuation">)</span>
  <span class="Identifier">echo</span> <span class="Identifier">immutable</span><span class="Operator">.</span><span class="Identifier">withIt</span> <span class="Keyword">do</span><span class="Punctuation">:</span>
    <span class="Identifier">it</span><span class="Operator">.</span><span class="Identifier">a</span> <span class="Operator">=</span> <span class="DecNumber">909</span>

<span class="Keyword">block</span><span class="Punctuation">:</span>
  <span class="Identifier">echo</span> <span class="StringLit">&quot;-- withResIt --&quot;</span>
  <span class="Keyword">let</span> <span class="Identifier">immutable</span> <span class="Operator">=</span> <span class="Punctuation">(</span><span class="Identifier">a</span><span class="Punctuation">:</span> <span class="DecNumber">12</span><span class="Punctuation">,</span> <span class="Identifier">b</span><span class="Punctuation">:</span> <span class="StringLit">&quot;eee&quot;</span><span class="Punctuation">)</span>
  <span class="Identifier">echo</span> <span class="Identifier">immutable</span><span class="Operator">.</span><span class="Identifier">withResIt</span> <span class="Keyword">do</span><span class="Punctuation">:</span>
    <span class="Identifier">it</span><span class="Operator">.</span><span class="Identifier">a</span> <span class="Operator">+=</span> <span class="DecNumber">999</span>
    <span class="Operator">$</span><span class="Identifier">it</span><span class="Operator">.</span><span class="Identifier">a</span> <span class="Operator">&amp;</span> <span class="Identifier">it</span><span class="Operator">.</span><span class="Identifier">b</span>

<span class="Keyword">block</span><span class="Punctuation">:</span>
  <span class="Identifier">echo</span> <span class="StringLit">&quot;-- join* --&quot;</span>
  <span class="Identifier">echo</span> <span class="Punctuation">{</span><span class="DecNumber">1</span> <span class="Punctuation">:</span> <span class="StringLit">&quot;22&quot;</span><span class="Punctuation">,</span> <span class="DecNumber">3</span><span class="Punctuation">:</span> <span class="StringLit">&quot;333&quot;</span><span class="Punctuation">}</span><span class="Operator">.</span><span class="Identifier">joinkv</span><span class="Punctuation">(</span><span class="Punctuation">)</span><span class="Operator">.</span><span class="Identifier">join</span><span class="Punctuation">(</span><span class="Punctuation">)</span>

<span class="Keyword">block</span><span class="Punctuation">:</span>
  <span class="Identifier">echo</span> <span class="StringLit">&quot;-- abbrevCamel --&quot;</span>
  <span class="Identifier">echo</span> <span class="Identifier">abbrevCamel</span><span class="Punctuation">(</span><span class="StringLit">&quot;AA&quot;</span><span class="Punctuation">,</span> <span class="Operator">@</span><span class="Punctuation">[</span><span class="StringLit">&quot;ABA&quot;</span><span class="Punctuation">,</span> <span class="StringLit">&quot;AZZ&quot;</span><span class="Punctuation">,</span> <span class="StringLit">&quot;A)&quot;</span><span class="Punctuation">]</span><span class="Punctuation">)</span></pre>
<pre class="listing">
<span style="color:red">This is a paragraph.</span>
<span style="color:blue">This is another paragraph.</span>
</pre>
<h2><a class="toc-backref" id="Z3-algorithms-Z3dot2-hmiscslashalgoslashhseqdistance" href="#Z3-algorithms-Z3dot2-hmiscslashalgoslashhseqdistance">3.2 <tt class="docutils literal"><span class="pre">hmisc/algo/hseqdistance</span></tt></a></h2><p>Fuzzy string matching and generic longest common subsequece implementation</p>
<ul class="simple"><li><tt class="docutils literal"><span class="pre">longestCommonSubsequence</span></tt> - generic implementation of LCS algorithm for <tt class="docutils literal"><span class="pre">seq[T]</span></tt></li>
<li><tt class="docutils literal"><span class="pre">fuzzyMatch</span></tt> - weighted sequence fuzzy match. Compare each element in the sequence to pattern and assign similarity score. Should behave similarly to <tt class="docutils literal"><span class="pre">fzf</span></tt> or sublime text. Reimplementation of <a class="reference external" href="https://www.forrestthewoods.com/blog/reverse_engineering_sublime_texts_fuzzy_match/">'Reverse engineering subtime text's fuzzy match'</a></li>
</ul>
<p>todo:</p>
<ul class="simple"><li>☐ levenstein distance</li>
<li>☐ Damerau–Levenshtein distance</li>
<li>☐ generate diffs for two sequences</li>
</ul>

<h2><a class="toc-backref" id="Z3-algorithms-Z3dot3-hmiscslashalgoslashhseq-mapping" href="#Z3-algorithms-Z3dot3-hmiscslashalgoslashhseq-mapping">3.3 <tt class="docutils literal"><span class="pre">hmisc/algo/hseq_mapping</span></tt></a></h2><ul class="simple"><li><tt class="docutils literal"><span class="pre">deduplicateIt</span></tt></li>
</ul>
<dl class="docutils"><dt><tt class="docutils literal"><span class="pre">mapPairs</span></tt></dt>
<dd><tt class="docutils literal"><span class="pre">mapIt</span></tt> for types that implement <tt class="docutils literal"><span class="pre">pairs</span></tt> iterator, or <tt class="docutils literal"><span class="pre">items</span></tt> that return tuple, or sequence of tuples. Inject index of the item, <tt class="docutils literal"><span class="pre">lhs</span></tt> (first element) and <tt class="docutils literal"><span class="pre">rhs</span></tt> (second element). Should correctly handle <tt class="docutils literal"><span class="pre">{.requiresinit.}</span></tt> fields.</dd>
</dl>

<h2><a class="toc-backref" id="Z3-algorithms-Z3dot4-hmiscslashalgoslashhtree-mapping" href="#Z3-algorithms-Z3dot4-hmiscslashalgoslashhtree-mapping">3.4 <tt class="docutils literal"><span class="pre">hmisc/algo/htree_mapping</span></tt></a></h2><dl class="docutils"><dt><tt class="docutils literal"><span class="pre">mapItBFStoSeq</span></tt></dt>
<dd>iterate over tree in BFS order, store mapping result in sequence.</dd>
<dt><tt class="docutils literal"><span class="pre">iterateItBFS</span></tt></dt>
<dd>iterate over tree in BFS order</dd>
<dt><tt class="docutils literal"><span class="pre">iterateItDFS</span></tt></dt>
<dd>iterate over tree in DFS order. Uses iterative DFS instead of recursive call.</dd>
<dt><tt class="docutils literal"><span class="pre">mapItDFS</span></tt></dt>
<dd><tt class="docutils literal"><span class="pre">mapIt</span></tt> for converting trees in DFS order</dd>
</dl>

<h1><a class="toc-backref" id="Z4-types" href="#Z4-types">4 Types</a></h1>
<h2><a class="toc-backref" id="Z4-types-Z4dot1-hmiscslashtypesslashhnim-ast" href="#Z4-types-Z4dot1-hmiscslashtypesslashhnim-ast">4.1 <tt class="docutils literal"><span class="pre">hmisc/types/hnim_ast</span></tt></a></h2><p>Statically typed wrapper for nim ast. Another take on solving problem of <tt class="docutils literal"><span class="pre">node[0][0][1][0]</span></tt>. Right now mostly covers types - parsing of implementation, generation and analysis.</p>
<ul class="simple"><li>working with enums<ul class="simple"><li><tt class="docutils literal"><span class="pre">parseEnumImpl</span></tt> - parse as enum implementation. Tested on alias, symbol, value, enum-as-generic-parameter, <tt class="docutils literal"><span class="pre">typedesc[Enum]</span></tt> etc.</li>
<li><tt class="docutils literal"><span class="pre">getEnumPref</span></tt> - for <a class="reference external" href="https://nim-lang.org/docs/nep1.html#introduction-naming-conventions">NEP-conforming</a> enums (<tt class="docutils literal"><span class="pre">prefixEnumValueName</span></tt>) get <tt class="docutils literal"><span class="pre">prefix</span></tt></li>
<li><tt class="docutils literal"><span class="pre">getEnumNames</span></tt> - get list of all enum names</li>
<li><tt class="docutils literal"><span class="pre">enumNames</span></tt> - macro. Generate <tt class="docutils literal"><span class="pre">seq[string]</span></tt> of names for all enums.</li>
</ul>
</li>
<li>working with object declarations<ul class="simple"><li><tt class="docutils literal"><span class="pre">ObjectBranch</span></tt>, <tt class="docutils literal"><span class="pre">Object</span></tt> and <tt class="docutils literal"><span class="pre">ObjectField</span></tt> types - wrappers on top of nim object declarations. Supports arbitrarily named case fields, annotations for objects etc. Currently does not cover all possible cases.</li>
<li><tt class="docutils literal"><span class="pre">eachField</span></tt> - visit each field in object</li>
<li><tt class="docutils literal"><span class="pre">eachField</span></tt> - recursively generate <tt class="docutils literal"><span class="pre">case</span></tt> expression for each possible and use insert result of callback for each field. For use case example see <a class="reference external" href="tests/tHnimAst.nim">tests/tHnimAst.nim</a></li>
<li>can be conveted to and from <tt class="docutils literal"><span class="pre">NimNode</span></tt></li>
<li><tt class="docutils literal"><span class="pre">eachCase</span></tt> - generate case statement for object's kind fields</li>
<li><tt class="docutils literal"><span class="pre">eachParallelCase</span></tt> - generate case statement for two object's kind fields.</li>
<li><tt class="docutils literal"><span class="pre">eachPath</span></tt></li>
</ul>
</li>
<li>working with object values<ul class="simple"><li><tt class="docutils literal"><span class="pre">ObjTree</span></tt> - 'stringly typed' representation of object value. mainly used in <tt class="docutils literal"><span class="pre">hpprint</span></tt>, but due to dependency reasons type definitions is still here.</li>
</ul>
</li>
</ul>

<h2><a class="toc-backref" id="Z4-types-Z4dot2-hmiscslashtypesslashhprimitives" href="#Z4-types-Z4dot2-hmiscslashtypesslashhprimitives">4.2 <tt class="docutils literal"><span class="pre">hmisc/types/hprimitives</span></tt></a></h2><dl class="docutils"><dt><tt class="docutils literal"><span class="pre">StrBlock</span></tt></dt>
<dd><tt class="docutils literal"><span class="pre">seq[string]</span></tt> + getting height/width</dd>
<dt><tt class="docutils literal"><span class="pre">ArrSize</span></tt></dt>
<dd>Size of 2d array as distinct type</dd>
<dt><tt class="docutils literal"><span class="pre">ArrRange</span></tt></dt>
<dd>range of elements in 1d array + lots of helper functions<ul class="simple"><li>move left/right edge with correctness checks (assertions)</li>
<li>check if position is in range</li>
<li>count number of 'middles' in sequence</li>
<li>check if range is a single point</li>
<li>find overlaps between two ranges</li>
<li>iterate over indices in cartesian product of two ranges - for example all cells in particular <tt class="docutils literal"><span class="pre">[row-range] X [col-range]</span></tt>.</li>
</ul>
</dd>
</dl>

<h2><a class="toc-backref" id="Z4-types-Z4dot3-hmiscslashtypesslashseq2d" href="#Z4-types-Z4dot3-hmiscslashtypesslashseq2d">4.3 <tt class="docutils literal"><span class="pre">hmisc/types/seq2d</span></tt></a></h2>
<h3><a class="toc-backref" id="Z4dot3-hmiscslashtypesslashseq2d-Z4dot3dot1-seq2d" href="#Z4dot3-hmiscslashtypesslashseq2d-Z4dot3dot1-seq2d">4.3.1 <tt class="docutils literal"><span class="pre">Seq2D</span></tt></a></h3><p>Always-rectangular 2d sequence of items. Public API prevents modification that will make it non-rectangular.</p>
<p>Helper functions are provided for</p>
<ul class="simple"><li>iterating elements<dl class="docutils"><dt>columns</dt>
<dd><tt class="docutils literal"><span class="pre">itercols</span></tt></dd>
<dt>rows</dt>
<dd><tt class="docutils literal"><span class="pre">iterrows</span></tt>, <tt class="docutils literal"><span class="pre">items</span></tt> for row without index, <tt class="docutils literal"><span class="pre">pairs</span></tt> for rows with index.</dd>
<dt>itercells</dt>
<dd>each element + global position <tt class="docutils literal"><span class="pre">(row, col)</span></tt></dd>
<dt>iterSomeCells</dt>
<dd>each cell that is not <tt class="docutils literal"><span class="pre">none(T)</span></tt> + position <tt class="docutils literal"><span class="pre">(row, col)</span></tt></dd>
</dl>
</li>
<li>mapping elements<dl class="docutils"><dt>map 2d sequence</dt>
<dd><tt class="docutils literal"><span class="pre">mapIt2d</span></tt> - each element is injected as <tt class="docutils literal"><span class="pre">it</span></tt></dd>
<dt>maximize value over rowmns</dt>
<dd><tt class="docutils literal"><span class="pre">maximizeRowIt</span></tt> get value for each element in row, return max one. Repeat for each row</dd>
<dt>maximize value over columns</dt>
<dd><tt class="docutils literal"><span class="pre">maximizeColIt</span></tt> get value for each element in column, return max one. Repeat for each column.</dd>
</dl>
</li>
<li>modification<dl class="docutils"><dt>single elements</dt>
<dd>All sorts of overload for <tt class="docutils literal"><span class="pre">[]</span></tt> and <tt class="docutils literal"><span class="pre">[]=</span></tt> operators</dd>
<dt>rows</dt>
<dd><tt class="docutils literal"><span class="pre">appendRow</span></tt>, <tt class="docutils literal"><span class="pre">insertRow</span></tt>, <tt class="docutils literal"><span class="pre">addHeader</span></tt></dd>
<dt>columns</dt>
<dd><tt class="docutils literal"><span class="pre">insertCol</span></tt></dd>
<dt>whole grid</dt>
<dd><tt class="docutils literal"><span class="pre">fillToSize</span></tt></dd>
</dl>
</li>
</ul>
<p>Helper functions for getting row/col count, iterating over rows/columns</p>

<h3><a class="toc-backref" id="Z4dot3-hmiscslashtypesslashseq2d-Z4dot3dot2-multicellgrid" href="#Z4dot3-hmiscslashtypesslashseq2d-Z4dot3dot2-multicellgrid">4.3.2 <tt class="docutils literal"><span class="pre">MulticellGrid</span></tt></a></h3><p>Same as <tt class="docutils literal"><span class="pre">Seq2D</span></tt> (always rectangular with API preventing unwanted modifications). Supports 'mutlicell' elements.</p>

<h2><a class="toc-backref" id="Z4-types-Z4dot4-hmiscslashtypesslashhtrie" href="#Z4-types-Z4dot4-hmiscslashtypesslashhtrie">4.4 <tt class="docutils literal"><span class="pre">hmisc/types/htrie</span></tt></a></h2><p>Implementation of <tt class="docutils literal"><span class="pre">trie</span></tt> data structure. Not sure about performance, mostly made for the sake of abstraction and API (storing list of paths in tree).</p>

<h2><a class="toc-backref" id="Z4-types-Z4dot5-hmiscslashtypesslashhvariant" href="#Z4-types-Z4dot5-hmiscslashtypesslashhvariant">4.5 <tt class="docutils literal"><span class="pre">hmisc/types/hvariant</span></tt></a></h2><p>Sum type as generic in nim. Similar to <tt class="docutils literal"><span class="pre">std::variant&lt; ... &gt;</span></tt>. Not really useful actually - after I wrote it there has never been a situation where I case objects were just 'too much'.</p>

<h2><a class="toc-backref" id="Z4-types-Z4dot6-hmiscslashtypesslashcolorstring" href="#Z4-types-Z4dot6-hmiscslashtypesslashcolorstring">4.6 <tt class="docutils literal"><span class="pre">hmisc/types/colorstring</span></tt></a></h2><p>Easier manipulation of colored strings in terminal. Support splitting regular strin in same-color chunks, finding 'visible' length of the string (as printed in terminal). Helper functions like <tt class="docutils literal"><span class="pre">toYellow()</span></tt> or <tt class="docutils literal"><span class="pre">toRed()</span></tt> to make creation of the colored strings simpler. All attributes from <tt class="docutils literal"><span class="pre">terminal</span></tt> module are supported (fg/bg colors and modifiers).</p>
<p>Provides two types for colored text - <tt class="docutils literal"><span class="pre">ColoredString</span></tt> (string + styling) and <tt class="docutils literal"><span class="pre">ColoredRune</span></tt> (unicode rune + styling).</p>

<h1><a class="toc-backref" id="Z5-contribution-amp-development" href="#Z5-contribution-amp-development">5 Contribution &amp; development</a></h1><p>Most of the features in this library were implemented on <em>do-it-when-I-need-it</em> basis. Some of them are tested quite extensively (sequence and tree mappings, colored strings), but more unit test are always welcome. If you consider contributing and have any questions about implementation or just want to clarify some things (documentation might need more attention) feel free to join my <a class="reference external" href="https://discord.gg/hjfYJCU">discord server</a> and ask questions there.</p>
<p>todo:</p>
<ul class="simple"><li>☐ generic implementation of simple graph</li>
<li>☐ basic graph algorithms<ul class="simple"><li>☐ topological sorting</li>
<li>☐ strongly connected components</li>
</ul>
</li>
</ul>
</p>
  
  </div>
</div>

    <div class="row">
      <div class="twelve-columns footer">
        <span class="nim-sprite"></span>
        <br/>
        <small style="color: var(--hint);">Made with Nim. Generated: 2020-08-23 18:57:45 UTC</small>
      </div>
    </div>
  </div>
</div>

</body>
</html>
